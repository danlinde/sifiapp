(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}};WebSocketRails.Channel=function(){function i(i,s,e){var n,r;this.name=i,this._dispatcher=s,this.is_private=e,this._failure_launcher=t(this._failure_launcher,this),this._success_launcher=t(this._success_launcher,this),this.dispatch=t(this.dispatch,this),this.trigger=t(this.trigger,this),this.bind=t(this.bind,this),this.destroy=t(this.destroy,this),r=this.is_private?"websocket_rails.subscribe_private":"websocket_rails.subscribe",n=new WebSocketRails.Event([r,{data:{channel:this.name}},this._dispatcher.connection_id],this._success_launcher,this._failure_launcher),this._dispatcher.trigger_event(n),this._callbacks={}}return i.prototype.destroy=function(){var t,i;return i="websocket_rails.unsubscribe",t=new WebSocketRails.Event([i,{data:{channel:this.name}},this._dispatcher.connection_id]),this._dispatcher.trigger_event(t),this._callbacks={}},i.prototype.bind=function(t,i){var s;return null==(s=this._callbacks)[t]&&(s[t]=[]),this._callbacks[t].push(i)},i.prototype.trigger=function(t,i){var s;return s=new WebSocketRails.Event([t,{channel:this.name,data:i},this._dispatcher.connection_id]),this._dispatcher.trigger_event(s)},i.prototype.dispatch=function(t,i){var s,e,n,r,c;if(null!=this._callbacks[t]){for(r=this._callbacks[t],c=[],e=0,n=r.length;n>e;e++)s=r[e],c.push(s(i));return c}},i.prototype._success_launcher=function(t){return null!=this.on_success?this.on_success(t):void 0},i.prototype._failure_launcher=function(t){return null!=this.on_failure?this.on_failure(t):void 0},i}()}).call(this);